(this["webpackJsonpreact-todo-list"]=this["webpackJsonpreact-todo-list"]||[]).push([[0],{15:function(e){e.exports=JSON.parse('{"domain":"dev-nofd3nl3.us.auth0.com","clientId":"NvtGSUYq2BFxX3L5kRnHFl6O6xALqt5y","redirect":"/codehooks-io-react-todo","apiOrigin":"https://mycrud-0sbn.api.codehooks.io","scope":"read:current_user create:current_user_metadata profile email"}')},72:function(e,t,n){e.exports=n(86)},77:function(e,t,n){},79:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10),c=n.n(o),i=(n(77),n(2)),s=n.n(i),u=n(18),l=n(6),d=n(33),p=n(121),m=n(118),f=n(123),h=(n(79),n(122)),v=function(e){var t=e.addTodo,n=Object(a.useState)({task:"",completed:!1}),o=Object(d.a)(n,2),c=o[0],i=o[1];return r.a.createElement("form",{className:"todo-form",onSubmit:function(e){e.preventDefault(),c.task.trim()&&(console.log("Add todo",c),t(c),i(Object(u.a)({},c,{task:""})))}},r.a.createElement(h.a,{label:"Task",type:"text",name:"task",value:c.task,onChange:function(e){i(Object(u.a)({},c,{task:e.target.value}))}}),r.a.createElement(m.a,{type:"submit"},"Submit"))},g=n(117),x=n(119),b=n(124),y=n(120),E=n(62),k=n.n(E),w=function(e){var t=e.todo,n=e.toggleComplete,a=e.removeTodo;return r.a.createElement(x.a,{style:{display:"flex"}},r.a.createElement(b.a,{checked:t.completed,onClick:function(){n(t._id)}}),r.a.createElement(p.a,{variant:"body1",style:{textDecoration:t.completed?"line-through":null}},t.task),r.a.createElement(y.a,{onClick:function(){a(t._id)}},r.a.createElement(k.a,null)))},O=function(e){var t=e.todos,n=e.removeTodo,a=e.toggleComplete;e.isAuthenticated;return r.a.createElement(g.a,null,t.map((function(e){return r.a.createElement(w,{key:e._id,todo:e,removeTodo:n,toggleComplete:a})})))},j=n(16),A=n(15),T=-1!==window.location.origin.indexOf("localhost")?window.location.origin:"".concat(window.location.origin).concat(A.redirect),I=function(){var e=Object(j.b)().logout;return r.a.createElement(m.a,{variant:"text",onClick:function(){return e({logoutParams:{returnTo:T}})}},"Log Out")},P=function(){var e=Object(j.b)(),t=e.user;return e.isAuthenticated&&r.a.createElement("div",null,r.a.createElement("img",{src:t.picture,alt:t.name}),r.a.createElement(p.a,{style:{padding:10},variant:"subtitle1"},t.name),r.a.createElement(p.a,{style:{padding:10},variant:"subtitle2"},t.email))},C=A.apiOrigin;var S=function(){var e=Object(a.useState)({todoItems:[],showResult:!1,apiMessage:"",error:null}),t=Object(d.a)(e,2),n=t[0],o=t[1],c=Object(j.b)(),i=(c.user,c.isAuthenticated),h=(c.isLoading,c.getAccessTokenSilently),g=c.loginWithPopup,x=(c.loginWithRedirect,c.getAccessTokenWithPopup);Object(a.useEffect)((function(){console.log("init useEffect"),b().catch((function(e){return console.error("Init error",e)}))}),[]),Object(a.useEffect)((function(){console.log("update",JSON.stringify(n.todoItems))}),[n.todoItems]);var b=function(){var e=Object(l.a)(s.a.mark((function e(){var t,a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h();case 3:return t=e.sent,e.next=6,fetch("".concat(C,"/dev/todo"),{headers:{Authorization:"Bearer ".concat(t)}});case 6:return a=e.sent,console.log("Fetch data",a.status,a.statusText),e.next=10,a.json();case 10:r=e.sent,console.log("Get data",r),(r=r.map((function(e){return void 0===e.completed&&(e.completed=!1),e})))&&o(Object(u.a)({},n,{todoItems:r,error:null})),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),console.error("API error",e.t0),o(Object(u.a)({},n,{error:e.t0.error||e.t0.message}));case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g();case 3:o(Object(u.a)({},n,{error:null})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),o(Object(u.a)({},n,{error:e.t0.error}));case 9:return e.next=11,b();case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x();case 3:o(Object(u.a)({},n,{error:null})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),o(Object(u.a)({},n,{error:e.t0.error}));case 9:return e.next=11,b();case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();function k(){return(k=Object(l.a)(s.a.mark((function e(t){var n,a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:return n=e.sent,console.log("add",t),e.next=6,fetch("".concat(C,"/dev/todo"),{method:"POST",headers:{Authorization:"Bearer ".concat(n),"content-type":"application/json"},body:JSON.stringify(t)});case 6:return a=e.sent,console.log("Post data",a.status,a.statusText),e.next=10,a.json();case 10:return r=e.sent,console.log("Post data response",r),e.next=14,b();case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(l.a)(s.a.mark((function e(t){var a,r,o,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=(a=n.todoItems.filter((function(e){return e._id===t})))[0]).completed=!a.completed,e.next=5,h();case 5:return r=e.sent,console.log("add",a),e.next=9,fetch("".concat(C,"/dev/todo/").concat(t),{method:"PUT",headers:{Authorization:"Bearer ".concat(r),"content-type":"application/json"},body:JSON.stringify(a)});case 9:return o=e.sent,console.log("Put data",o.status,o.statusText),e.next=13,o.json();case 13:return c=e.sent,console.log("Put data response",c),e.next=17,b();case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(l.a)(s.a.mark((function e(t){var n,a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:return n=e.sent,console.log("delete",t),e.next=6,fetch("".concat(C,"/dev/todo/").concat(t),{method:"DELETE",headers:{Authorization:"Bearer ".concat(n),"content-type":"application/json"}});case 6:return a=e.sent,console.log("Delete data",a.status,a.statusText),e.next=10,a.json();case 10:return r=e.sent,console.log("Delete data response",r),e.next=14,b();case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement("div",{className:"App"},r.a.createElement(p.a,{style:{padding:10},variant:"h2"},"React Todo"),r.a.createElement(p.a,{style:{padding:10},variant:"subtitle1"},"Auth0.com authentication - Codehooks.io API Backend"),r.a.createElement(P,null),"login_required"===n.error&&r.a.createElement(f.a,{severity:"warning"},"Authentication required: ",r.a.createElement(m.a,{variant:"text",onClick:function(){return y()}},"Log In")),"consent_required"===n.error&&r.a.createElement(f.a,{severity:"warning"},"API concent required: ",r.a.createElement(m.a,{variant:"text",onClick:function(){return E()}},"Grant")),r.a.createElement(v,{addTodo:function(e){return k.apply(this,arguments)}}),r.a.createElement(O,{todos:i?n.todoItems:[],removeTodo:function(e){return A.apply(this,arguments)},toggleComplete:function(e){return w.apply(this,arguments)},isAuthenticated:i}),r.a.createElement("div",{style:{padding:10}},i?r.a.createElement(I,null):""),null!==n.error?r.a.createElement(p.a,{style:{color:"red"},variant:"subtitle1"},n.error):"")};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _=A.domain,B=A.clientId,N=A.scope,q=-1!==window.location.origin.indexOf("localhost")?window.location.origin:"".concat(window.location.origin).concat(A.redirect);c.a.render(r.a.createElement(j.a,{domain:_,clientId:B,authorizationParams:{redirect_uri:q,audience:"https://".concat(_,"/api/v2/"),scope:N}},r.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[72,1,2]]]);
//# sourceMappingURL=main.96ef9622.chunk.js.map